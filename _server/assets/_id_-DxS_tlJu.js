import{ssr as d,ssrHydrationKey as g,ssrElement as T,mergeProps as y,createComponent as a,ssrAttribute as k,escape as m,Dynamic as $}from"solid-js/web";import{mergeProps as N,splitProps as _,createMemo as f,createEffect as C,on as I,createRenderEffect as D,For as H,Switch as j,Match as b,Show as L}from"solid-js";import{format as R}from"date-fns";import{A as U,N as B}from"./notfound-CtnZf2HU.js";import F from"remark-parse";import K from"remark-rehype";import{createStore as O,reconcile as V}from"solid-js/store";import{html as q,find as z,svg as G}from"property-information";import{unified as J}from"unified";import{VFile as Q}from"vfile";import{visit as W}from"unist-util-visit";import{stringify as X}from"comma-separated-tokens";import{stringify as Y}from"space-separated-tokens";import Z from"remark-math";import ee from"rehype-katex";import te from"rehype-raw";import w from"prismjs";import{u as re,a as ne}from"./app-CkD9V9kX.js";import"prismjs/plugins/line-numbers/prism-line-numbers.js";import"prismjs/components/prism-typescript.js";import"prismjs/components/prism-rust.js";import"prismjs/components/prism-ruby.js";import"prismjs/components/prism-bash.js";import"prismjs/components/prism-graphql.js";import"prismjs/components/prism-json.js";import"prismjs/components/prism-markdown.js";import"prismjs/components/prism-latex.js";import"prismjs/components/prism-jsx.js";import{A as le}from"./articles-GZEzE41s.js";var oe=["<pre",">","</pre>"],ie=e=>{const t=N({language:"javascript"},e),[,n]=_(t,["language","children","class","innerHTML"]),i=f(()=>`language-${t.language}`),s=f(()=>{const l=t.children?.toString();if(!l)return;const r=w.languages[t.language];return r?w.highlight(l,r,t.language):void 0});return C(I([i,s],()=>{w.highlightAll()})),d(oe,g(),T("code",y({get class(){return`${i()} ${t.class||""}`},get innerHTML(){return s()}},n),void 0,!1))};const se=e=>{const{children:t,class:n,node:i,...s}=e,l=/language-(\w+)/.exec(n),r=l?l[1]:"text",c=String(i?.children[0]?.value??void 0).replace(/\n$/,"");return a(ie,y(s,{language:r,class:"line-numbers overflow-x-scroll",children:c}))};var ae=["<div",">","</div>"],ce=e=>{if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{W(t,"element",(n,i,s)=>{const l=s;if(l===null)return;let r;if(e.allowedElements?r=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(r=e.disallowedElements.includes(n.tagName)),!r&&e.allowElement&&typeof i=="number"&&l&&(r=!e.allowElement(n,i,l)),r&&typeof i=="number"&&l)return e.unwrapDisallowed&&n.children?l.children.splice(i,1,...n.children):l.children.splice(i,1),i})}},me=ce;function ue(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n?.type==="element"&&n?.tagName==="input")return n}return null}function v(e,t){let n=-1,i=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n]?.type==="element"&&i++;return i}function de(e,t,n,i){const s=z(i.schema,t);let l=n;s.property==="className"&&(s.property="class"),!(l==null||l!==l)&&(Array.isArray(l)&&(l=s.commaSeparated?X(l):Y(l)),s.space&&s.property?e[s.property]=l:s.attribute&&(e[s.attribute]=l))}function A(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(t=>String(t)).join("")}var E={}.hasOwnProperty,ge=e=>a(M,{get node(){return e.node},get context(){return e.context}}),M=e=>a(H,{get each(){return e.node.children},children:(t,n)=>a(j,{get children(){return[a(b,{get when(){return t.type==="element"},get children(){return a(pe,{get context(){return e.context},get index(){return n()},node:t,get parent(){return e.node}})}}),a(b,{get when(){return t.type==="text"&&t.value!==`
`},get children(){return a(fe,{get context(){return e.context},get index(){return n()},node:t,get parent(){return e.node}})}})]}})}),fe=e=>{const t=f(()=>{const n={...e.context},i=n.options,s=e.node,r={parent:e.parent},c=s.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},o=i.components&&E.call(i.components,"text")?i.components.text:null,p=typeof o=="string";return r.key=["text",c.start.line,c.start.column,e.index].join("-"),i.sourcePos&&(r["data-sourcepos"]=A(c)),!p&&i.rawSourcePos&&(r.sourcePosition=s.position),p||(r.node=s),{properties:r,context:n,component:o}});return a(L,{get when(){return t().component},get fallback(){return e.node.value},get children(){return a($,y({get component(){return t().component||"span"}},()=>t().properties))}})},pe=e=>{const t=f(()=>{const n={...e.context},i=n.options,s=n.schema,l=e.node,r=l.tagName,c=e.parent,o={};let p=s,h;if(s.space==="html"&&r==="svg"&&(p=G,n.schema=p),l.properties)for(h in l.properties)E.call(l.properties,h)&&de(o,h,l.properties[h],n);(r==="ol"||r==="ul")&&n.listDepth++,(r==="ol"||r==="ul")&&n.listDepth--,n.schema=s;const x=l.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},P=i.components&&E.call(i.components,r)?i.components[r]:r,u=typeof P=="string";if(o.key=[r,x.start.line,x.start.column,e.index].join("-"),r==="a"&&i.linkTarget&&(o.target=typeof i.linkTarget=="function"?i.linkTarget(String(o.href||""),l.children,typeof o.title=="string"?o.title:void 0):i.linkTarget),r==="a"&&i.transformLinkUri&&(o.href=i.transformLinkUri(String(o.href||""),l.children,typeof o.title=="string"?o.title:void 0)),!u&&r==="code"&&c.type==="element"&&c.tagName!=="pre"&&(o.inline=!0),!u&&(r==="h1"||r==="h2"||r==="h3"||r==="h4"||r==="h5"||r==="h6")&&(o.level=Number.parseInt(r.charAt(1),10)),r==="img"&&i.transformImageUri&&(o.src=i.transformImageUri(String(o.src||""),String(o.alt||""),typeof o.title=="string"?o.title:void 0)),!u&&r==="li"&&c.type==="element"){const S=ue(l);o.checked=S?.properties?!!S.properties.checked:null,o.index=v(c,l),o.ordered=c.tagName==="ol"}return!u&&(r==="ol"||r==="ul")&&(o.ordered=r==="ol",o.depth=n.listDepth),(r==="td"||r==="th")&&(o.align&&(o.style||(o.style={}),o.style.textAlign=o.align,delete o.align),u||(o.isHeader=r==="th")),!u&&r==="tr"&&c.type==="element"&&(o.isHeader=c.tagName==="thead"),i.sourcePos&&(o["data-sourcepos"]=A(x)),!u&&i.rawSourcePos&&(o.sourcePosition=l.position),!u&&i.includeElementIndex&&(o.index=v(c,l),o.siblingCount=v(c)),u||(o.node=l),{properties:o,context:n,component:P}});return a($,y({get component(){return t().component}},()=>t().properties,{get children(){return a(M,{get node(){return e.node},get context(){return t().context}})}}))},he={renderingStrategy:"memo",remarkPlugins:[],rehypePlugins:[],class:"",unwrapDisallowed:!1,disallowedElements:void 0,allowedElements:void 0,allowElement:void 0,children:"",sourcePos:!1,rawSourcePos:!1,skipHtml:!1,includeElementIndex:!1,transformLinkUri:null,transformImageUri:void 0,linkTarget:"_self",components:{}},ye=e=>{const t=N(he,e),[n,i]=O({type:"root",children:[]}),s=f(()=>{const l=t.children,r=J().use(F).use(t.remarkPlugins||[]).use(K,{allowDangerousHtml:!0}).use(t.rehypePlugins||[]).use(me,t),c=new Q;typeof l=="string"?c.value=l:l!==void 0&&t.children;const o=r.runSync(r.parse(c),c);if(o.type!=="root")throw new TypeError("Expected a `root` node");return o});return t.renderingStrategy==="reconcile"&&D(()=>{i(V(s()))}),d(ae,g()+k("class",m(t.class,!0),!1),m(a(ge,{context:{options:t,schema:q,listDepth:0},get node(){return t.renderingStrategy==="memo"?s():n}})))},xe=["<h1",' class="py-10 px-10 lg:px-16 bg-gray-100 text-center text-gray-700 text-2xl lg:text-4xl font-bold">',"</h1>"],we=["<p",' class="text-sm text-gray-600">',"</p>"],ve=["<div",' class="flex justify-center items-center w-full px-10 lg:px-15 bg-gray-100"><img',' class="w-full lg:w-1/3 shadow-gray shadow-xl"></div>'],ke=["<div",' class="pt-2 pb-28 px-10 lg:px-16 bg-gray-100 text-gray-700 text-sm lg:text-lg">',"</div>"],Ee=["<div",' class="flex justify-between items-center px-10 lg:px-16 pb-1 bg-gray-100"><!--$-->',"<!--/--><!--$-->","<!--/--></div>"];const Pe=e=>d(xe,g(),m(e.title)),Se=()=>a(U,{class:"text-sm lg:text-lg text-blue-700 underline",href:"/",children:"記事一覧へ ↩"}),be=e=>d(we,g(),m(R(e.date,"yyyy年MM月dd日 公開"))),$e=e=>d(ve,g(),k("alt",m(e.title,!0),!1)+k("src",m(e?.img,!0)??m(B,!0),!1)),Ne=e=>d(ke,g(),m(a(ye,{renderingStrategy:"reconcile",remarkPlugins:[Z],rehypePlugins:[ee,te],components:{code(t){return a(se,t)}},get children(){return e.markdown}}))),Ae=e=>[a(Pe,{get title(){return e.article.title}}),d(Ee,g(),m(a(Se,{})),m(a(be,{get date(){return e.article.date}}))),a($e,{get img(){return e.article.img},get title(){return e.article.title}}),a(Ne,{get markdown(){return e.article.markdown}})],Me=e=>{const t=(e??"").toString(),n=le.find(i=>i.id===t);if(n&&!n.isArchive)return n};var Te=["<main",' class="min-h-[calc(100vh-58px)] bg-gray-100 lg:bg-gray-800 lg:pt-14 lg:px-28 lg:px-72">',"</main>"];function it(){const{id:e}=re(),t=f(()=>Me(e),[e])(),n=ne();return t?d(Te,g(),m(a(Ae,{article:t}))):(n("/404"),null)}export{it as default};
